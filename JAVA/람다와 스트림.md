## 1. ëŒë‹¤ì‹(Lambda expression)

ëŒë‹¤ì‹ì´ë€ ë©”ì„œë“œë¥¼ í•˜ë‚˜ì˜ ì‹(expression)ìœ¼ë¡œ í‘œí˜„í•œ ê²ƒ. í•¨ìˆ˜ë¥¼ ê°„ëµí•˜ë©´ì„œë„ ëª…í™•í•œ ì‹ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

ë©”ì„œë“œë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë©”ì„œë“œì˜ ì´ë¦„ê³¼ ë°˜í™˜ê°’ì´ ì—†ì–´ì§€ë¯€ë¡œ, ëŒë‹¤ì‹ì„ â€˜ìµëª…í•¨ìˆ˜(anonymous function)â€™ì´ë¼ê³ ë„ í•œë‹¤.

```java
int[] arr = new int[5];
Arrays.setAll(arr, (i) -> (int)(Math.random() * 5) + 1);
```

<br>

<br>

### 1) ì‘ì„±ë°©ë²•

```java
ë°˜í™˜íƒ€ì… ë©”ì„œë“œì´ë¦„(ë§¤ê°œë³€ìˆ˜ ì„ ì–¸) {
		ë¬¸ì¥ë“¤
}

(ë§¤ê°œë³€ìˆ˜ ì„ ì–¸) -> {
		ë¬¸ì¥ë“¤
}
```

```java
// Before
int amx(int a, int b) {
		return a > b ? a : b;
}

// After
(int a, int b) -> {
		return a > b ? a : b;
}
```

<br>

ë°˜í™˜ê°’ì´ ìˆëŠ” ë©”ì„œë“œì˜ ê²½ìš°, returnë¬¸ ëŒ€ì‹  ì‹(expression)ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥. ì—°ì‚°ê²¨ë¡œê°€ê°€ ìë™ì ìœ¼ë¡œ ë¹ˆí™˜ë˜ê¸° ë•Œë¬¸ì—, ë¬¸ì¥(statement)ì´ ì•„ë‹Œ â€˜ì‹â€™ì´ë¯€ë¡œ ëì— â€˜;â€™ëŠ” ìƒëµ

```java
(int a, int b) -> { return a > b ? a : b; } --> (int a, int b) -> a > b ? a : b;
```

<br>

ë§¤ê°œë³€ìˆ˜ê°€ í•˜ë‚˜ë¿ì¸ ê²½ìš°ì—ëŠ” ê´„í˜¸()ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤. But, ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ ìˆìœ¼ë©´ ê´„í˜¸() ìƒëµX

```java
// Before
(a)     -> a * a
(int a) -> a * a

// After
a     -> a * a // OK
int a -> a * a // ERROR
```

<br>

ê´„í˜¸{}ì•ˆì˜ ë¬¸ì¥ì´ í•˜ë‚˜ì¼ ë•ŒëŠ” ê´„í˜¸{}ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.

```java
// Before
(String name, int i) -> {
		System.out.println(name + "=" + i);
}

// After
(String name, int i) ->
		System.out.println(name + "=" + i);

```

<br>

<br>

But, ê´„í˜¸{} ì•ˆì˜ ë¬¸ì¥ì´ returnë¬¸ì¼ ê²½ìš° ê´„í˜¸{} ìƒëµX

```java
(int a, int b) -> { return a > b ? a : b; }   // OK.
(int a, int b) ->   return a > b ? a : b;     // ERROR.
```

<br>

<br>

**ë©”ì„œë“œë¥¼ ëŒë‹¤ì‹ìœ¼ë¡œ ë³€í™˜**

```java
// Before
int max(int a, int b) {
		return a > b ? a : b;
}

// After
(int a, int b) -> { return a > b ? a : b; }
(int a, int b) -> a > b ? a : b
(a, b) -> a > b ? a : b
```

```java
// Before
vodi printVar(String name, int i) {
		System.out.println(name + "=" + i);
}

// After
(String name, int i) -> { System.out.println(name + "=" + i); }
(name, i) -> { System.out.println(name + "=" + i); }
(name, i) -> System.out.println(name + "=" + i);
```

```java
// Before
int square(int x) {
		return x * x;
}

// After
(int x) -> x * x
(x) -> x * x
x -> x * x
```

```java
// Before
int roll() {
		return (int)(Math.random() * 6);
}

// After
() -> { return (int)(Math.random() * 6); }
() -> (int)(Math.random() * 6)
```

```java
// Before
int sumArr(int[] arr) {
		int sum = 0;
		for (int i : arr)
				sum += i;
		return sum;
}

// After
(int[] arr) -> {
		int sum = 0;
		for (int i : arr)
				sum += i;
		return sum;
}
```

<br>

<br>

### 2) í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(Functional Interface)

í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ ì¶”ìƒ ë©”ì„œë“œë§Œ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìˆë‹¤. ëŒë‹¤ì‹ê³¼ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œê°€ 1:1ë¡œ ì—°ê²°ë  ìˆ˜ ìˆê¸° ë•Œë¬¸.

staticë©”ì„œë“œì™€ defulatë©”ì„œë“œì˜ ê°œìˆ˜ì—ëŠ” ì œì•½ì´ ì—†ë‹¤.

> @FunctionalInterfaceë¥¼ ë¶™ì´ë©´, ì»´íŒŒì¼ëŸ¬ê°€ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì •ì˜í•˜ì˜€ëŠ”ì§€ í™•ì¸í•´ì£¼ë¯€ë¡œ, ê¼­ ë¶™ì´ì.



<br>

<br>

```java
// Before
List<String> list = Arrays.asList("abc", "aaa", "bbb", "ddd", "aaa");

Collections.sort(list, new Comparator<String>() {
		public int compare(String s1, String s2) {
				return s2.compareTo(s1);
		}
});

// After
List<String> list = Arrays.asList("abc", "aaa", "bbb", "ddd", "aaa");
Collections.sort(list, (s1, s2) -> s2.compareTo(s1));
```

<br>

<br>

### í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ì˜ ë§¤ê°œë³€ìˆ˜ì™€ ë°˜í™˜íƒ€ì…

```java
@FunctionalInterface
interface MyFunction {
		void myMethod(); // ì¶”ìƒ ë©”ì„œë“œ
}
```

<br>

ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ê°€ MyFunctioníƒ€ì…ì´ë©´, ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ëŒë‹¤ì‹ì„ ì°¸ì¡°í•˜ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì§€ì •í•´ì•¼í•œë‹¤ëŠ” ëœ».

```java
void aMethod(MyFunction f) { // ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤
		f.myMethod();            // MyFuncitonì— ì •ì˜ëœ ë©”ì„œë“œ í˜¸ì¶œ
}
```

<br>

or ì°¸ì¡°ë³€ìˆ˜ ì—†ì´ ì§ì ‘ ëŒë‹¤ì‹ìœ¼ë¡œ ë§¤ê°œë³€ìˆ˜ë¡œ ì§€ì •ê°€ëŠ¥

```java
aMethod(() -> System.out.println("myMethod()")); // ëŒë‹¤ì‹ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ì§€ì •
```

<br>

ë©”ì„œë“œì˜ ë°˜í™˜íƒ€ì…ì´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤íƒ€ì…ë¦¬ë§ˆë…€, ì´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¶”ìƒë©”ì„œë“œì™€ ë™ë“±í•œ ëŒë‹¤ì‹ì„ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ëŒë‹¤ì‹ì„ ì§ì ‘ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.

```java
MyFunction myMethod() {
		MyFunction f = () -> {};
		return f;    // ì´ ì¤„ê³¼ ìœ—ì¤„ì„ í•œ ì¤„ë¡œ ì¤„ì´ë©´, return () -> {};
}
```

<br>

<br>

### ëŒë‹¤ì‹ì˜ íƒ€ì…ê³¼ í˜•ë³€í™˜

```java
MyFunciton f = (MyFunction)(() -> {}); // ì–‘ë³€ì˜ íƒ€ì…ì´ ë‹¤ë¥´ë¯€ë¡œ í˜•ë³€í™˜ì´ í•„ìš”
```

<br>

ëŒë‹¤ì‹ì€ ì˜¤ì§ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œë§Œ í˜•ë³€í™˜ì´ ê°€ëŠ¥

```java
Object obj = (Object)(() -> {}); // ì—ëŸ¬. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œë§Œ í˜•ë³€í™˜ ê°€ëŠ¥
```

<br>

Objectíƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜í•˜ë ¤ë©´, í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜í•´ì•¼ í•œë‹¤.

```java
Object obj = (Object)(MyFunction)(() -> {});
String str = ((Object)(MyFunction)(() -> {})).toString();
```

<br>

<br>

### 4) functioníŒ¨í‚¤ì§€

ë§¤ë²ˆ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥´ ì •ì˜í•˜ì§€ ë§ê³ , ê°€ëŠ¥í•˜ë©´ ì´ íŒ¨í‚¤ì§€ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

| í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- | --- |
| Runnable | void run() | ë§¤ê°œë³€ìˆ˜ë„ ì—†ê³ , ë°˜í™˜ê°’ë„ ì—†ìŒ. |
| Supplier<T> | T get() | ë§¤ê°œë³€ìˆ˜ëŠ” ì—†ê³ , ë°˜í™˜ê°’ë§Œ ìˆìŒ. |
| Comsumer<T> | void accept(T t) | Supplierì™€ ë°˜ëŒ€ë¡œ ë§¤ê°œë³€ìˆ˜ë§Œ ìˆê³ , ë°˜í™˜ê°’ì´ ì—†ìŒ. |
| Function<T, R> | R apply(T t) | ì¼ë°˜ì ì¸ í•¨ìˆ˜. í•˜ë‚˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ì„œ ê²°ê³¼ë¥¼ ë°˜í™˜. |
| Predicate<T> | boolean test(T t) | ì¡°ê±´ì‹ì„ í‘œí˜„í•˜ëŠ”ë° ì‚¬ìš©í•¨.<br />ë§¤ê°œë³€ìˆ˜ëŠ” í•˜ë‚˜. ë°˜í™˜ íƒ€ì…ì€ boolean |

<br>

<br>

### ì¡°ê±´ì‹ì˜ í‘œí˜„ì— ì‚¬ìš©ë˜ëŠ” Predicate

PredicateëŠ” Functionì˜ ë³€í˜•, ë°˜í™˜íƒ€ì…ì´ booleanì´ë¼ëŠ” ê²ƒë§Œ ë‹¤ë¥´ë‹¤.

```java
Predicate<String> isEmptyStr = s -> s.length() == 0;
String s = "";

if (isEmptyStr.test(s)) // if(s.length() == 0)
		System.out.println("This is an empty String.");
```

<br>

<br>

### ë§¤ê°œë³€ìˆ˜ê°€ ë‘ ê°œì¸ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤

ë§¤ê°œë³€ìˆ˜ì˜ ê°œìˆ˜ê°€ 2ê°œì¸ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ëŠ” ì´ë¦„ì•ì— ì ‘ë‘ì‚¬ â€œBiâ€ê°€ ë¶™ëŠ”ë‹¤.

| í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- | --- |
| BiConsumer<T, U> | void accept(T t, U u) | ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë§Œ ìˆê³ , ë°˜í™˜ê°’ì´ ì—†ìŒ. |
| BiPredicate<T, U> | boolean test(T t, U u) | ì¡°ê±´ì‹ì„ í‘œí˜„í•˜ëŠ”ë° ì‚¬ìš©ë¨.<br />ë§¤ê°œë³€ìˆ˜ëŠ” ë‘˜, ë°˜í™˜ê°’ì€ boolean |
| BiFUnction<T, U, R> | R apply(T t, U u) | ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ì„œ í•˜ë‚˜ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•¨. |

<br>

<br>

### UnaryOperatorì™€ BinaryOperator

| í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- | --- |
| UnaryOperation<T> | T apply(T t) | Functionì˜ ìì†. Functionê³¼ ë‹¬ë¦¬<br />ë§¤ê°œë³€ìˆ˜ì™€ ê²°ê³¼ì˜ íƒ€ì…ì´ ê°™ë‹¤. |
| BinaryOperator<T> | T apply(T t, T t) | BiFunctionì˜ ìì†. BiFunctionì™€<br />ë‹¬ë¦¬ ë§¤ê°œë³€ìˆ˜ì™€ ê²°ê³¼ì˜ íƒ€ì…ì´ ê°™ë‹¤. |

<br>

<br>

### ì»¬ë ‰ì…˜ í”„ë ˆì„ì›ê³¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤

| ì¸í„°í˜ì´ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- | --- |
| Collection | boolean removeIf(Predicate<E> filter) | ì¡°ê±´ì— ë§ëŠ” ìš”ì†Œë¥¼ ì‚­ì œ |
| List | void replaceAll(UnaryOperator<E> operator) | ëª¨ë“  ìš”ì†Œë¥¼ ë³€í™˜í•˜ì—¬ ëŒ€ì²´ |
| Iterable | void forEach(Consumer<T> action) | ëª¨ë“  ìš”ì†Œì— ì‘ì—… actionì„ ìˆ˜í–‰ |
| Map | V compute(K key, BiFunction<K.V.V> f) | ì§€ì •ëœ í‚¤ì˜ ê°’ì— ì‘ì—… fë¥¼ ìˆ˜í–‰ |
|  | V computeIfAbsent(K key, Function<K.V> f) | í‚¤ê°€ ì—†ìœ¼ë©´, ì‘ì—… f ìˆ˜í–‰ í›„ ì¶”ê°€ |
|  | V computeIfPresent(K key, BiFunction<K.V.V> f) | ì§€ì •ëœ í‚¤ê°€ ìˆì„ ë–„, ì‘ì—… f ìˆ˜í–‰ |
|  | V merge(K key, V value, BiFunction<V.V.V.> f) | ëª¨ë“  ìš”ì†Œì— ë³‘í•©ì‘ì—… fë¥¼ ìˆ˜í–‰ |
|  | void forEach(BiConsumer<K.V> action) | ëª¨ë“  ìš”ì†Œì— ì‘ì—… actionì„ ìˆ˜í–‰ |
|  | void replaceAll(BiFunction<K.V.V> f) | ëª¨ë“  ìš”ì†Œì— ì¹˜í™˜ì‘ì—… fë¥¼ ìˆ˜í–‰ |

<br>

<br>

### ê¸°ë³¸í˜•ì„ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤

| í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ | ë©”ì„œë“œ | ì„¤ëª… |
| --- | --- | --- |
| DoubleToIntFunction | int applyAsInt(double d) | AToBFunctionì€ ì…ë ¥ì´ Aíƒ€ì…<br />ì¶œë ¥ì´ Bíƒ€ì… |
| ToIntFunction<T> | int applyAsInt(T value) | ToBFunctionì€ ì¶œë ¥ì´ Bíƒ€ì…<br />ì…ë ¥ì€ ì§€ë„¤ë¦­ íƒ€ì… |
| IntFunction<R> | R apply(T t, U u) | AFunctionì€ ì…ë ¥ì´ Aíƒ€ì…ì´ê³ <br />ì¶œë ¥ì€ ì§€ë„¤ë¦­ íƒ€ì… |
| ObjIntConsumer<T> | void accept(T t, U u) | ObjAFunctionì€ ì…ë ¥ì´ T, A<br />íƒ€ì…ì´ê³  ì¶œë ¥ì€X |

<br>

<br>

<br>

### 5) Functionì˜ í•©ì„±ê³¼ Predicateì˜ ê²°í•©

```java
Function
default <V> Function<T,V> andThen(Function<? super R,? extends V> after;
default <V> Function<V,R> compose(Function<? super V,? extends T> before)
static  <V> Function<T,T> ientity()

Predicate
default Predicate<T>    and(Predicate<? super T> other)
default Predicate<T>    or(Predicate<? super T> other)
default Predicate<T>    negate()
static <T> Predicate<T> isEqual(Object targetRef)
```

<br>

### Functionì˜ í•©ì„±

```java
default <V> FUnction<T,V> andThen(Function<? super R,? extends V> after)
default <V> FUnction<V,R> compose(Function<? super V,? extends T> before)
```

<br>

Ex) ë¬¸ìì—´ì„ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ fì™€ ìˆ«ìë¥¼ 2ì§„ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ gë¥¼ andThen()ìœ¼ë¡œ í•©ì„±í•˜ì—¬ ìƒˆë¡œìš´ í•¨ìˆ˜ hë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤.

```java
Function<String, Integer> f = (s) -> Integer.parseInt(s, 16);
Function<Integer, String> g = (i) -> Integer.toBinaryString(i);
Function<String, String> h = f.andThen(g);
```

<br>

í•¨ìˆ˜ hì˜ ì§€ë„¤ë¦­ íƒ€ì…ì´ <String, String>ì´ë‹¤. Stringì„ ì…ë ¥ë°›ì•„ì„œ Stringì„ ê²°ê³¼ë¡œ ë°˜í™˜í•œë‹¤.

Ex) í•¨ìˆ˜ hì— ë¬¸ìì—´ â€œFFâ€ë¥¼ ì…ë ¥í•˜ë©´, ê²°ê³¼ë¡œ â€œ111111â€ì„ ì–»ëŠ”ë‹¤.

```java
System.out.println(h.apply("FF")); // "FF" -> 255 -> "111111"
```

<br>

compose()ë¥¼ ì´ìš©í•´ì„œ ë‘ í•¨ìˆ˜ë¥¼ ë°˜ëŒ€ì˜ ìˆœì„œë¡œ í•©ì„±ë„ ê°€ëŠ¥í•˜ë‹¤.

```java
Function<Integer, String>  g = (i) -> Integer.toBinaryString(i);
Function<String, Integer>  f = (s) -> Integer.parseInt(s, 16);
Function<Integer, Integer> h = f.compose(g);
```

```java
System.out.println(h.apply(2)); // 2 -> "10" -> 16
```

<br>

<br>

### Predicateì˜ ê²°í•©

and(), or(), negate()ë¡œ ì—°ê²°í•´ì„œ í•˜ë‚˜ì˜ ìƒˆë¡œìš´ Predicateë¡œ ê²°í•©í•  ìˆ˜ ìˆë‹¤.

```java
Predicate<Integer> p = i -> i < 100;
Predicate<Integer> q = i -> i < 200;
Predicate<Integer> r = i -> i % 2 == 0;
Predicate<Integer> notP = p.negate();     // i >= 100

// 100 <= i && (i < 200 || i % 2 == 0)
Predicate<Integer> all = notP.and(q.or(r));
System.out.println(all.test(150));        // true
```

<br>

**Lambda**

```java
Predicate<Integer> all = notP.and(i -> i < 200).or(i -> i % 2 == 0);
```

<br>

<br>

```java
Predicate<String> p = Predicate.isEqual(str1);
boolean result = p.test(str2);    // str1ê³¼ str2ê°€ ê°™ì€ì§€ ë¹„êµí•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜
```

<br>

**Lambda**

```java
// str1ê³¼ str2ê°€ ê°™ì€ì§€ ë¹„êµ
boolean result = Predicate.isEqual(str1).test(str2);
```

<br>

<br>

### 6) ë©”ì„œë“œ ì°¸ì¡°

ëŒë‹¤ì‹ì´ í•˜ë‚˜ì˜ ë©”ì„œë“œë§Œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì—ëŠ” â€˜ë©”ì„œë“œ ì°¸ì¡°(method reference)â€™ë¼ëŠ” ë°©ë²•ìœ¼ë¡œ ëŒë‹¤ì‹ì„ ê°„ëµíˆ í•  ìˆ˜ ìˆë‹¤.

Ex) ë¬¸ìì—´ì„ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ëŒë‹¤ì‹

```java
Function<String, Integer> f = (String s) -> Integer.parseInt(s);
```

```java
// Before
Function<String, Integer> f = (String s) -> Integer.parseInt(s);
BiFunction<String, String, Boolean> f = (s1, s2) -> s1.equals(s2);

// After
Function<String, Integer> f = Integer::parseInt;        // ë©”ì„œë“œ ì°¸ì¡°
BiFunction<String, String, Boolean> f = String::equals; // ë©”ì„œë“œ ì°¸ì¡°
```

<br>

ì´ë¯¸ ìƒì„±ëœ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ëŒë‹¤ì‹ì—ì„œ ì‚¬ìš©í•œ ê²½ìš°: í´ë˜ìŠ¤ ì´ë¦„ ëŒ€ì‹  ê·¸ ê°ì²´ì˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì ì›Œì¤˜ì•¼ í•œë‹¤.

```java
MyClass obj = new MyClass();
Function<String, Boolean> f = (x) -> obj.equals(x); // ëŒë‹¤ì‹
Function<String, Boolean> f2 = obj::equals;         // ë©”ì„œë“œ ì°¸ì¡°
```

<br>

| ì¢…ë¥˜ | ëŒë‹¤ | ë©”ì„œë“œ ì°¸ì¡° |
| --- | --- | --- |
| static ë©”ì„œë“œ ì°¸ì¡° | (x) â†’ ClassName.method(x) | ClassName::method |
| ì¸ìŠ¤í„´ìŠ¤ë©”ì„œë“œ ì°¸ì¡° | (obj, x) â†’ obj.method(x) | ClassName::method |
| íŠ¹ì • ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë©”ì„œë“œ ì°¸ì¡° | (x) â†’ obj.method(x) | obj::method |

<br>

<aside>
ğŸ’¡ í•˜ë‚˜ì˜ ë©”ì„œë“œë§Œ í˜¸ì¶œí•˜ëŠ” ëŒë‹¤ì‹ì€ â€˜í´ë˜ìŠ¤ì´ë¦„::ë©”ì„œë“œì´ë¦„â€™ ë˜ëŠ” â€˜ì°¸ì¡°ë³€ìˆ˜::ë©”ì„œë“œì´ë¦„â€™ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
</aside>

<br>

<br>

### ìƒì„±ìì˜ ë©”ì„œë“œ ì°¸ì¡°

```java
Supplier<MyClass> s = () -> new MyClass(); // ëŒë‹¤ì‹
Supplier<MyClass> s = MyClass::new;        // ë©”ì„œë“œ ì°¸ì¡°
```

<br>

ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ìë¼ë©´, ë§¤ê°œë³€ìˆ˜ì˜ ê°œìˆ˜ì— ë”°ë¼ ì•Œë§ì€ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

í•„ìš”í•˜ë‹¤ë©´ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒˆë¡œ ì •ì˜í•´ì•¼ í•œë‹¤.

```java
Function<Integer, MyClass> f  = (i) -> new MyClass(i);   // ëŒë‹¤ì‹
Function<Integer, MyClass> f2 = MyClass::new;            // ë©”ì„œë“œ ì°¸ì¡°

BiFunction<Integer, String, MyClass> bf = (i, s) -> new MyClass(i, s);
BiFunction<Integer, String, MyClass> bf2 = MyClass::new; // ë©”ì„œë“œ ì°¸ì¡°
```

<br>

ë°°ì—´ì„ ìƒì„±í•  ë•Œ

```java
Function<Integer, int[]> f  = x -> new int[x]; // ëŒë‹¤ì‹
Function<Integer, int[]> f2 = int[]::new;      // ë©”ì„œë“œ ì°¸ì¡°
```

ë©”ì„œë“œ ì°¸ì¡°ëŠ” ëŒë‹¤ì‹ì„ ë§ˆì¹˜ staticë³€ìˆ˜ì²˜ëŸ¼ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.



<br>

<br>

<br>

## 2. ìŠ¤íŠ¸ë¦¼(stream)

### 1) ìŠ¤íŠ¸ë¦¼ì´ë€?

ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì¶”ìƒí™”í•˜ê³ , ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ”ë° ìì£¼ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë“¤ì„ ì •ì˜í•´ ë†“ì€ ê²ƒ. ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì¶”ìƒí™”í•˜ì˜€ë‹¤ëŠ” ê²ƒì€, ë°ì´í„° ì†ŒìŠ¤ê°€ ë¬´ì—‡ì´ë˜ ê°„ì— ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆê²Œ ì‹ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆë‹¤.

```java
// Before
String[] strArr = { "aaa", "ddd", "ccc" };
List<String> strList = Arrays.asList(strArr);

// After
Stream<String> strStream1 = strList.stream();      // ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±
Stream<String> strStream2 = Arrays.stream(strArr); // ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±

// ë°ì´í„°ë¥¼ ì½ì–´ì„œ ì •ë ¬í•˜ê³  í™”ë©´ì— ì¶œë ¥(Before)
Arrays.sort(strArr);
Collections.sort(strList);
for (String str : strArr)
		System.out.println(str);

for (String str : strList)
		System.out.println(str);

// ë°ì´í„°ë¥¼ ì½ì–´ì„œ ì •ë ¬í•˜ê³  í™”ë©´ì— ì¶œë ¥(After)
strStream1.sorted().forEach(System.out::println);
strStream2.sorted().forEach(System.out::println);
```

<br>

<br>

### ìŠ¤íŠ¸ë¦¼ì€ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.

ë°ì´í„° ì†ŒìŠ¤ë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ì½ê¸°ë§Œ í•  ë¿, ë°ì´í„° ì†ŒìŠ¤ë¥´ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
// ì •ë ¬ëœ ê²°ê³¼ë¥¼ ìƒˆë¡œìš´ Listì— ë‹´ì•„ì„œ ë°˜í™˜
List<String> sortedList = strStream2.sorted().collect(Collectiors.toList());
```

<br>

<br>

### ìŠ¤íŠ¸ë¦¼ì€ ì¼íšŒìš©.

```java
strStream1.sorted().forEach(System.out::println);
int numOfStr = strStream1.count(); // ERROR. ìŠ¤íŠ¸ë¦¼ì´ ì´ë¯¸ ë‹«í˜
```

<br>

<br>

### ìŠ¤íŠ¸ë¦¼ì€ ì‘ì—…ì„ ë‚´ë¶€ ë°˜ë³µìœ¼ë¡œ ì²˜ë¦¬

```java
// Before
for (String str : strList)
		System.out.println(str);

// After
System.forEach(System.out::println);
```

```java
void forEach(Consumer<? super T> action) {
		Objects.requireNonNull(action); // ë§¤ê°œë³€ìˆ˜ì˜ ë„ ì²´í¬

		for (T t : src) {               // ë‚´ë¶€ ë°˜ë³µ
				action.accept(T);
		}
}
```

<br>

<br>

### ìŠ¤íŠ¸ë¦¼ì˜ ì—°ì‚°

ìŠ¤íŠ¸ë¦¼ì— ì •ì˜ëœ ë©”ì„œë“œ ì¤‘ì—ì„œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ë‹¤ë£¨ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì—°ì‚°(operation)ì´ë¼ í•œë‹¤.

ìŠ¤íŠ¸ë¦¼ì´ ì œê³µí•˜ëŠ” ì—°ì‚°ì€ ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.

```java
ì¤‘ê°„ ì—°ì‚°: ì—°ì‚° ê²°ê³¼ê°€ ìŠ¤íŠ¸ë¦¼ì¸ ì—°ì‚°. ìŠ¤íŠ¸ë¦¼ì— ì—°ì†í•´ì„œ ì¤‘ê°„ ì—°ì‚°í•  ìˆ˜ ìˆìŒ
ìµœì¢… ì—°ì‚°: ì—°ì‚° ê²°ê³¼ê°€ ìŠ¤íŠ¸ë¦¼ì´ ì•„ë‹Œ ì—°ì‚°. ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼ ì†Œëª¨í•˜ë¯€ë¡œ ë‹¨ í•œë²ˆë§Œ ê°€ëŠ¥
```

```java
// EX
String[] strArr = { "dd", "aaa", "CC", "cc", "b" };
Stream<String> stream           = Stream.of(strArr);   // ë¬¸ìì—´ ë°°ì—´ì´ ì†ŒìŠ¤ì¸ ìŠ¤íŠ¸ë¦¼
Stream<String> filteredStream   = stream.filter();     // ê±¸ëŸ¬ë‚´ê¸° (ì¤‘ê°„ ì—°ì‚°)
Stream<String> distinctedStream = stream.distinct();   // ì¤‘ë³µì œê±° (ì¤‘ê°„ ì—°ì‚°)
Stream<String> sortedStream     = stream.sort();       // ì •ë ¬ (ì¤‘ê°„ ì—°ì‚°)
Stream<String> limitedStream    = stream.limit(5);     // ìŠ¤íŠ¸ë¦¼ ìë¥´ê¸° (ì¤‘ê°„ ì—°ì‚°)
int            total            = stream.count();      // ìš”ì†Œ ê°œìˆ˜ ì„¸ê¸° (ìµœì¢… ì—°ì‚°)
```

<br>

<br>

### ì§€ì—°ëœ ì—°ì‚°

ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì—ì„œ í•œ ê°€ì§€ ì¤‘ìš”í•œ ì : ìµœì¢… ì—°ì‚°ì´ ìˆ˜í–‰ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¤‘ê°„ ì—°ì‚°ì´ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì .

ì¤‘ê°„ ì—°ì‚°ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ë‹¨ì§€ ì–´ë–¤ ì‘ì—…ì´ ìˆ˜í–‰ë˜ì–´ì•¼í•˜ëŠ”ì§€ë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì¼ ë¿ì´ë‹¤. ìµœì¢… ì—°ì‚°ì´ ìˆ˜í–‰ë˜ì–´ì•¼ ë¹„ë¡œì†Œ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë“¤ì´ ì¤‘ê°„ ì—°ì‚°ì„ ê±°ì³ ìµœì¢… ì—°ì‚°ì—ì„œ ì†Œëª¨ëœë‹¤.

<br>

<br>

### Stream<Integer>ì™€ IntStream

ìš”ì†Œì˜ íƒ€ì…ì´ Tì¸ ìŠ¤íŠ¸ë¦¼ìœ ê¸°ë³¸ì ìœ¼ë¡œ Stream<T>ì´ì§€ë§Œ, ì˜¤í† ë°•ì‹±&ì–¸ë°•ì‹±ìœ¼ë¡œ ì¸í•œ ë¹„íš¨ìœ¨ì„ ì¤„ì´ê¸° ìœ„í•´ ë°ì´í„° ì†ŒìŠ¤ì˜ ìš”ì†Œë¥¼ ê¸°ë³¸í˜•ìœ¼ë¡œ ë‹¤ë£¨ëŠ” ìŠ¤íŠ¸ë¦¼, IntStream, LongStream, DoubleStreamì´ ì œê³µ.

```java
Stream<Integer> -> IntStream // íš¨ìœ¨ì´ ë” ì¢‹ë‹¤.
```

<br>

<br>

### ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼

ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œì˜ ì¥ì  ì¤‘ í•˜ë‚˜ê°€ ë³‘ëŸ´ ì²˜ë¦¬ê°€ ì‰½ë‹¤ëŠ” ê²ƒì´ë‹¤. ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì´ í”„ë ˆì„ì›ì„ ì´ìš©í•´ì„œ ìë™ì ìœ¼ë¡œ ì—°ì‚°ì„ ë³‘ë ¬ë¡œ ìˆ˜í–‰í•œë‹¤.

ìš°ë¦¬ëŠ” ìŠ¤íŠ¸ë¦¼ì— `parallel()` ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë³‘ë ¬ë¡œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë„ë¡ ì§€ì‹œí•˜ë©´ ëœë‹¤.

ë³‘ë ¬ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´? â†’ `sequential()`

```java
int sum = strStream.parallel() // strStreamì„ ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „í™˜
											.mapToInt(s -> s.length())
											.sum();
```

<br>

<br>

### 2) ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°

### ì»¬ë ‰ì…˜

```java
Stream<T> Collection.stream();
```

```java
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5); // ê°€ë³€ì¸ì
Stream<Integer> intStream = list.stream();         // listë¥¼ ì†ŒìŠ¤ë¡œ í•˜ëŠ” ì»¬ë ‰ì…˜ ìƒì„±
```

<br>

`forEach()`: ì§€ì •ëœ ì‘ì—…ì„ ìŠ¤íŠ¸ë¦¼ì˜ ëª¨ë“  ìš”ì†Œì— ëŒ€í•´ ìˆ˜í–‰.

```java
intStream.forEach(System.out::println); // ìŠ¤íŠ¸ë¦¼ì˜ ëª¨ë“  ìš”ì†Œë¥¼ ì¶œë ¥
intStream.forEach(System.out::println); // ì—ëŸ¬. ìŠ¤íŠ¸ë¦¼ì´ ë‹«í˜€ ìˆë‹¤.
```

<br>

<br>

### ë°°ì—´

ë°°ì—´ì„ ì†ŒìŠ¤ë¡œ í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•˜ëŠ” ë©”ì„œë“œëŠ” Streamê³¼ Arraysì— static ë©”ì„œë“œë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤.

```java
Stream<T> Stream.of(T... values)
Stream<T> Stream.of(T[])
Stream<T> Arrays.stream(T[])
Stream<T> Arrays.stream(T[] array, int startInclusive, int endExclusive)

// ë¬¸ìì—´ ìŠ¤íŠ¸ë¦¼
Stream<String> strStream = Stream.of("a", "b", "c");
Stream<String> strStream = Stream.of(new String[]{"a", "b", "c"});
Stream<String> strStream = Arrays.stream(new String[]{"a", "b", "c"});
Stream<String> strStream = Arrays.stream(new String[]{"a", "b", "c"}, 0, 3);

// ê¸°ë³¸í˜• ë°°ì—´ì„ ì†ŒìŠ¤ë¡œ í•˜ëŠ” ìŠ¤íŠ¸ë¦¼
IntStream IntStream.of(int... values) // Streamì´ ì•„ë‹ˆë¼ IntStream
IntStream IntStream.of(int[])
IntStream Arrays.stream(int[])
IntStream Arrays.stream(int[] array, int startInclusive, int endExclusive)
```

<br>

<br>

### íŠ¹ì • ë²”ìœ„ì˜ ì •ìˆ˜

`IntStream` ê³¼ `LongStream` ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§€ì •ëœ ë²”ìœ„ì˜ ì—°ì†ëœ ì •ìˆ˜ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ìƒì„±í•´ì„œ ë°˜í™˜í•˜ëŠ” `range()` ì™€ `rangeClosed()` ë¥¼ ê°€ì§€ê³  ìˆë‹¤.

```java
IntStream  IntStream.range(int begin, int end)
IntStream  IntStream.rangeClosed(int begin, int end)

// range: ê²½ê³„ì˜ ëì¸ endê°€ ë²”ìœ„ì— í¬í•¨X
// rangeClosed(): í¬í•¨
IntStream intStream = IntStream.range(1, 5);       // 1, 2, 3, 4
IntStream intStream = IntStream.rangeClosed(1, 5); // 1, 2, 3, 4, 5
```

<br>

<br>

### ì„ì˜ì˜ ìˆ˜

```java
IntStream     ints()
LongStream    longs()
DoubleStream  doubles()

IntStream intStream = new Random().ints();        // ë¬´í•œ ìŠ¤íŠ¸ë¦¼
intStream.limit(5).forEach(System.out::println);  // 5ê°œì˜ ìš”ì†Œë§Œ ì¶œë ¥
```

<br>

<br>

### ëŒë‹¤ì‹ - iterate(), generate()

`iterate()` ì™€ `generate()` ëŠ” ëŒë‹¤ì‹ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ, ì´ ëŒë‹¤ì‹ì— ì˜í•´ ê³„ì‚°ë˜ëŠ” ê°’ë“¤ì„ ìš”ì†Œë¡œ í•˜ëŠ” ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±

```java
static<T> Stream<T> iterate(T seed, UnaryOperator<T> f)
static<T> Stream<T> generate(Supplier<T> s)
```

<br>

`iterate()`: ì”¨ì•—ê°’(seed)ìœ¼ë¡œ ì§€ì •ëœ ê°’ë¶€í„° ì‹œì‘í•´ì„œ, ëŒë‹¤ì‹ fì— ì˜í•´ ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ë‹¤ì‹œ seedê°’ìœ¼ë¡œ í•´ì„œ ê³„ì‚°ì„ ë°˜ë³µí•œë‹¤.

```java
Stream<Integer> evenStream = Stream.iterate(0, n->n+2); // 0, 2, 4, 6, ...
```

<br>

`generate()`: ëŒë‹¤ì‹ì— ì˜í•´ ê³„ì‚°ë˜ëŠ” ê°’ì„ ìš”ì†Œë¡œ í•˜ëŠ” ë¬´í•œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•´ì„œ ë°˜í™˜, But ì´ì „ ê²°ê³¼ë¥¼ ì´ìš©í•´ì„œ ë‹¤ìŒ ìš”ì†Œë¥¼ ê³„ì‚°í•´í•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
Stream<Double>  randomStream = Stream.generate(Math::random);
Stream<Integer> oneStream    = Stream.generate(() -> 1);
```

<br>

`generate()` ì— ì •ì˜ëœ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì€ `Supplier<T>` ì´ë¯€ë¡œ ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ëŒë‹¤ì‹ë§Œ í—ˆìš©

<br>

<br>

**ì£¼ì˜!**

`iterate()` ì™€ `generate()` ì— ì˜í•´ ìƒì„±ëœ ìŠ¤íŠ¸ë¦¼ì„ ê¸°ë³¸í˜• ìŠ¤íŠ¸ë¦¼ íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¡œ ë‹¤ë£° ìˆ˜ ì—†ë‹¤.

```java
IntStream    evenStream   = Stream.iterate(0, n->n+2);     // ì—ëŸ¬.
DoubleStream randomStream = Stream.generate(Math::random); // ì—ëŸ¬.
```

<br>

í•„ìš”í•˜ë‹¤ë©´, `mapToInt()` ì™€ ê°™ì€ ë©”ì„œë“œë¡œ ë³€í™˜

```java
IntStream evenStream = Stream.iterate(0, n->n+2).mapToInt(Integer::valueOf);
Stream<Integer> stream = evenStream.boxed(); // IntStream -> Stream<Integer>
```

<br>

IntStreamíƒ€ì…ì˜ ìŠ¤íŠ¸ë¦¼ì„ `Stream<Integer>` íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ë ¤ë©´, `boxed()` ë¥¼ ì‚¬ìš©

<br>

<br>

### íŒŒì¼

```java
Stream<Path> Files.list(Path dir)
```

<br>

<br>

### ë¹ˆ ìŠ¤íŠ¸ë¦¼

ìš”ì†Œê°€ í•˜ë‚˜ë„ ì—†ëŠ” ë¹„ì–´ìˆëŠ” ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆë‹¤.

ìŠ¤íŠ¸ë¦¼ì— ì—°ì‚°ì„ ìˆ˜í–‰í•œ ê²°ê³¼ê°€ í•˜ë‚˜ë„ ì—†ì„ ë•Œ, nullë³´ë‹¤ ë¹ˆ ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤.

```java
Stream emptyStream = Stream.empty(); // empty()ëŠ” ë¹ˆ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•´ì„œ ë°˜í™˜
long count = emptyStream.count();    // countì˜ ê°’ì€ 0
```

<br>

<br>

### ë‘ ìŠ¤íŠ¸ë¦¼ì˜ ì—°ê²°

`concat()` ì„ ì‚¬ìš©í•˜ë©´, ë‘ ìŠ¤íŠ¸ë¦¼ì„ í•˜ë‚˜ë¡œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤. ì—°ê²°í•˜ë ¤ëŠ” ë‘ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†ŒëŠ” ê°™ì€ íƒ€ì…ì´ì–´ì•¼ í•œë‹¤.

```java
String[] str1 = {"123", "456", "789"};
String[] str2 = {"ABC", "abc", "DEF"};

Stream<String> str1 = Stream.of(str1);
Stream<String> str2 = Stream.of(str2);
Stream<String> str3 = Stream.concat(str1, str2); // ë‘ ìŠ¤íŠ¸ë¦¼ì„ í•˜ë‚˜ë¡œ ì—°ê²°
```

<br>

<br>

### 3) ìŠ¤íŠ¸ë¦¼ì˜ ì¤‘ê°„ ì—°ì‚°

### ìŠ¤íŠ¸ë¦¼ ìë¥´ê¸° - skip(), limit()

`skip()`: ìŠ¤íŠ¸ë¦¼ì˜ ì¼ë¶€ë¥¼ ì˜ë¼ë‚¼ ë•Œ ì‚¬ìš©

```java
Stream<T> skip(long n)
Stream<T> limit(long maxSize)
```

```java
IntStream intStream = INtStream.rangeClosed(1, 10);      // 1~10ì˜ ìš”ì†Œë¥¼ ê°€ì§„ ìŠ¤íŠ¸ë¦¼
intStream.skip(3).limit(5).forEach(System.out::println); // 45678
```

<br>

<br>

### ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œ ê±¸ëŸ¬ë‚´ê¸° - fliter(), distinct()

`distinct()`: ìŠ¤íŠ¸ë¦¼ì—ì„œ ì¤‘ë³µëœ ìš”ì†Œë“¤ì„ ì œê±°

`filter()`: ì£¼ì–´ì§„ ì¡°ê±´(Predicate)ì— ë§ì§€ ì•ŠëŠ” ìš”ì†Œë¥¼ ì œê±°

```java
Stream<T> filter(Predicate<? super T> predicate)
Stream<T> distinct()
```

```java
// distinct
IntStream intStream = IntStream.of(1, 2, 3, 3, 3, 4, 5, 5, 6);
intStream.distinct().forEach(System.out::print); // 123456

// filter()ëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ Predicateë¥¼ í•„ìš”. booleanì¸ ëŒë‹¤ì‹ì„ ì‚¬ìš©í•´ë„ ëœë‹¤.
IntStream intStream = IntStream.rangeClosed(1, 10);       // 1~10
intStream.filter(i -> i%2 == 0).forEach(System.out::print); // 246810

// filter()ë¥¼ ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©
// ë‘ ë¬¸ì¥ì˜ ê²°ê³¼ëŠ” ê°™ë‹¤.
intStream.filter(i -> i%2 != 0 && i%3 != 0).forEach(System.out::print); // 157
intStream.filter(i -> i%2 != 0).filter(i-> i%3 != 0).forEach(System.out::print);
```

<br>

<br>

### ì •ë ¬ - sorted()

ìŠ¤íŠ¸ë¦¼ì„ ì •ë ¬í•  ë•Œ ì‚¬ìš©

```java
Stream<T> sorted()
Stream<T> sorted(Comparator<? super T> comparator)
```

<br>

sorted()ëŠ” ì§€ì •ëœ Comparatorë¡œ ìŠ¤íŠ¸ë¦¼ì„ ì •ë ¬í•˜ëŠ”ë°, intê°’ì„ ë°˜í™˜í•˜ëŠ” ëŒë‹¤ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥. COmparatorë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ìŠ¤íŠ¸ë¦¼ ìš”ì†Œì™€ ê¸°ë³¸ ì •ë ¬ ê¸°ì¤€(Comparable)ìœ¼ë¡œ ì •ë ¬í•œë‹¤.

<br>

But, ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œê°€ COmparableì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë©´ ì˜ˆì™¸ê°€ ë°œìƒ

```java
Stream<String> strStream = Stream.of("dd", "aaa", "CC", "cc", "b");
strStream.sorted().forEach(System.out::print); // CCaabbccdd
```

<br>

ê°€ì¥ ê¸°ë³¸ì ì¸ ë©”ì„œë“œëŠ” `comparaing()`

```java
comparing(Function<T, U> keyExtractor)
comparing(Function<T, U> keyExtractor, Comparator<U> keyComparator)

// Comparableì„ êµ¬í˜„í•œ ê²½ìš°, ë§¤ê°œë³€ìˆ˜ í•˜ë‚˜ì§œë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë¨.
// ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°, ì¶”ê°€ì ì¸ ë§¤ê°œë³€ìˆ˜ë¡œ ì •ë ¬ê¸°ì¤€(Comparator)ì„ ë”°ë¡œ ì§€ì •
comparingInt(ToIntFunction<T> keyExtractor)
comparingLong(ToLongFunction<T> keyExtractor)
comparingDouble(ToDoubleFunction<T> keyExtractor)

// ì •ë ¬ ì¡°ê±´ì„ ì¶”ê°€í•  ë•ŒëŠ” thenComparing()ì„ ì‚¬ìš©
thenComparing(Comparator<T> other)
thenComparing(Function<T, U> keyExtractor)
thenComparing(Function<T, U> keyExtractor, Comparator<U> keyComp)

// Ex) í•™ìƒ ìŠ¤íŠ¸ë¦¼(studentStream)ì„ ë°˜(ban)ë³„, ì„±ì (totalScore)ìˆœ, ì´ë¦„(name)ìˆœìœ¼ë¡œ ì •ë ¬
studentStream.sorted(Comparator.comparing(Student::getBan)
																.thenComparing(Student::getTotalScore)
																.thenComparing(Student::getName)
																.forEach(System.out::println);
```



<br>

<br>



### ë³€í™˜ - map()

ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œì— ì €ì¥ëœ ê°’ ì¤‘ì—ì„œ ì›í•˜ëŠ” í•„ë“œë§Œ ë½‘ì•„ë‚´ê±°ë‚˜ íŠ¹ì • í˜•íƒœë¡œ ë³€í™˜í•´ì•¼ í•  ë•Œê°€ ìˆëŠ”ë° ê·¸ë•Œ ì‚¬ìš©.

```java
Stream<R> map(Function<? super T,? extends R> mapper()
// Fileì˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ íŒŒì¼ì˜ ì´ë¦„ë§Œ ë½‘ì•„ì„œ ì¶œë ¥í•˜ê³  ì‹¶ì„ ë–„
Stream<File> fileStream = Stream.of(new FIle("Ex1.java"), new File("Ex1"),
					new File("Ex1.bak"), new FIle("Ex2.java"), new File("Ex1.txt"));

// map()ìœ¼ë¡œ Stream<File>ì„ Stream<String>ìœ¼ë¡œ ë³€í™˜
Stream<String> filenameStream = fileStream.map(File::getName);
filenameStream.forEach(System.out::println); // ìŠ¤íŠ¸ë¦¼ì˜ ëª¨ë“  íŒŒì¼ì´ë¦„ì„ ì¶œë ¥

// map()ë„ filter()ì²˜ëŸ¼ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì— ì—¬ëŸ¬ ë²ˆ ì ìš©í•  ìˆ˜ ìˆë‹¤.
// Ex) Fileì˜ ìŠ¤íŠ¸ë¦¼ì—ì„œ íŒŒì¼ì˜ í™•ì¥ìë§Œ ë½‘ì€ ë‹¤ìŒ ì¤‘ë³µì„ ì œê±°í•´ì„œ ì¶œë ¥
fileStream.map(File::getName)                // Stream<File> -> Stream<String>
		.filter(s -> s.indexOf('.') != -1)       // í™•ì¥ìê°€ ì—†ëŠ” ê²ƒì€ ì œì™¸
		.map(s -> s.substring(s.indexOf('.')+1)) // Stream<String> -> Stream<String>
		.map(String::toUpperCase)                // ëª¨ë“  ëŒ€ë¬¸ìë¡œ ë³€í™˜
		.distinct()                              // ì¤‘ë³µ ì œê±°
		.forEach(System.out::print);             // JAVABAKTXT
```

<br>

<br>

### ì¡°íšŒ - peek()

ì—°ì‚°ê³¼ ì—°ì‚° ì‚¬ì´ì— ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©.

`forEach()` ì™€ ë‹¬ë¦¬ ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼ ì†Œëª¨í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì—°ì‚° ì‚¬ì´ì— ì—¬ëŸ¬ ë²ˆ ë¼ì›Œ ë„£ì–´ë„ ëœë‹¤.

```java
fileStream.map(File::getName)                            // Stream<File> -> Stream<String>
		.filter(s -> s.indexOf('.') != -1)                   // í™•ì¥ìê°€ ì—†ëŠ” ê²ƒì€ ì œì™¸
		.peek(s -> System.out.printf("filename = %s%n", s))  // íŒŒì¼ëª…ì„ ì¶œë ¥
		.map(s -> s.substring(s.indexOf('.') + 1))           // í™•ì¥ìë§Œ ì¶”ì¶œ
		.peek(s -> System.out.printf("extension = %s%s", s)) // í™•ì¥ìë¥¼ ì¶œë ¥
		.forEach(Systemn.out::println);                      
```

<br>

<br>

### mapToInt(), mapToLong(), mapToDouble()

```java
Stream<String> -> IntStream ë³€í™˜ í•  ë•Œ, mapToInt(Integer::parseInt)
Stram<Integer> -> IntStream ë³€í™˜ í•  ë•Œ, mapToInt(Integer::intValue)
```

<br>

<br>

### flatMap() - Stream<T[]>ë¥¼ Stream<T>ë¡œ ë³€í™˜

ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œê°€ ë°°ì—´ì´ê±°ë‚˜ map()ì˜ ì—°ì‚°ê²°ê³¼ê°€ ë°°ì—´ì¸ ê²½ìš°, ìŠ¤íŠ¸ë¦¼ì˜ íƒ€ì…ì´ Stream<T[]>ì¸ ê²½ìš°, map() ëŒ€ì‹  flatMap()ì„ ì‚¬ìš©

```java
Stream<String[]> strArrStrm = Stream.of(
					new String[] {"abc", "def", "ghi"},
					new String[] {"ABC", "GHI", "JKLMN"}
);

// ê° ìš”ì†Œì˜ ë¬¸ìì—´ì„ í•©ì³ì„œ ë¬¸ìì—´ì´ ìš”ì†Œì¸ Stream<String>ìœ¼ë¡œ ë§Œë“¤ë ¤ë©´
Stream<Stream<String>> strStream = strArrStrm.map(Arrays::stream);

// Before
Stream<Stream<String>> strStream = strArrStrm.map(Arrays::stream);

// After
Stream<String> strStrm = strArrStrm.flatMap(Arrays::stream);
Stream<String[]> --- map(Arrays::stream) ---> Stream<Stream<String>>
Stream<String[]> --- flatMap(Arrays::stream) ---> Stream<String>
// Ex2 ë¬¸ì¥ë“¤ì„ split()ìœ¼ë¡œ ë‚˜ëˆ ì„œ ìš”ì†Œê°€ ë‹¨ì–´ì¸ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ
String[] lineArr = {
		"Belive or not It is true",
		"Do or do not There is no try",
};

Stream<String> lineStream = Arrays.stream(lineArr);
Stream<Stream<String>> strArrStream = lineStream.map(line -> Stream.of(line.split(" +")));

// After
Stream<String> strStream = lineStream.flatMap(line -> Stream.of(line.splie(" +")));
Stream<Sttring> --- map(s -> Stream.of(s.splie(" +"))) ---> Stream<Stream<String>>
Stream<String>  --- flatMap(s -> Stream.of(s.splie(" +"))) ---> Stream<String>
// Ex3 ë‹¨ì–´ë“¤ì„ ì†Œë¬¸ìë¡œ ë³€í™˜í•˜ê³ , ì¤‘ë³µëœ ë‹¨ì–´ë“¤ì„ ì œê±°í•œ ë‹¤ìŒ ì •ë ¬í•´ì„œ ì¶œë ¥
strStream.map(String::toLowerCase)      // ëª¨ë“  ë‹¨ì–´ë¥¼ ì†Œë¬¸ìë¡œ ë³€ê²½
					.distinct()                    // ì¤‘ë³µëœ ë‹¨ì–´ë¥¼ ì œê±°
					.sorted()                      // ì‚¬ì „ ìˆœìœ¼ë¡œ ì •ë ¬
					.forEach(System.out::println); // í™”ë©´ì— ì¶œë ¥

// ìŠ¤íŠ¸ë¦¼ì˜ ìŠ¤íŠ¸ë¦¼ì„ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ì„ í•©ì¹ ë•Œë„ flatMap ì‚¬ìš©
Stream<String> strStrm = Stream.of("abc", "def", "jklmn");
Stream<String> strStrm2 = Stream.of("ABC", "GHI", "JKLMN");

Stream<String<String>> strmStrm = Stream.of(strStrm, strStrm2);
```

<br>

<br>

<br>

### 4) Optional<T>ì™€ OptionalInt

`Optional<T>`: Tíƒ‘ì˜ ê°ì²´ë¥¼ ê°ì‹¸ëŠ” ë˜í¼ í´ë˜ìŠ¤. Optionalíƒ€ì…ì˜ ê°ì²´ì—ëŠ” ëª¨ë“  íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤.

```java
public final class Optional<T> {
		private final T value; // Tíƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜
}
```

ìµœì¢… ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ê·¸ëƒ¥ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. Optionalê°ì²´ì— ë‹´ì•„ì„œ ë°˜í™˜í•œë‹¤.

ê°ì²´ì— ë‹´ì•„ì„œ ë°˜í™˜ì„ í•˜ë©´, ë°˜í™˜ëœ ê²°ê³¼ê°€ nullì¸ì§€ ë§¤ë²ˆ ifë¬¸ìœ¼ë¡œ ì²´í¬í•˜ëŠ” ëŒ€ì‹  Optionalì— ì •ì˜ëœ ë©”ì„œë“œë¥¼ í†µí•´ì„œ ê°„ë‹¨íˆ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

Null ì²´í¬ë¥¼ ìœ„í•œ ifë¬¸ ì—†ì´ë„ NullPointerExceptionì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

<br>

<br>

### Optionalê°ì²´ ìƒì„±

Optionalê°ì²´ë¥¼ ìƒì„±í•  ë•ŒëŠ” `of()` ë˜ëŠ” `ofNullable()` ì„ ì‚¬ìš©.

```java
String str = "abc";
Optional<String> optVal = Optional.of(str);
Optional<String> optVal = Optional.of("abc");
Optional<String> optVal = Optional.of(new String("abc"));
```

<br>

IF. ì°¸ì¡°ë³€ìˆ˜ì˜ ê°’ì´ nullì¼ ê°€ëŠ¥ì„±ì´ ìˆë‹¤ë©´, of() â†’ ofNullable()ì„ ì‚¬ìš©.

Why? â†’ of(): ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì´ nullì´ë©´, NullPointerExceptionë°œìƒ.

```java
Optional<String> optVal = Optional.of(null);         // NullPointerException ë°œìƒ
Optional<String> optVal = Optional.ofNullable(null); // OK
```

<br>

Optional<T>íƒ€ì…ì˜ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•  ë•ŒëŠ” empty()ë¥¼ ì‚¬ìš©.

nullë¡œ ì´ˆê¸°í™” ê°€ëŠ¥í•˜ì§€ë§Œ, empty()ë¡œ í•˜ëŠ”ê²ƒì´ ë°”ëŒì§.

> emtpy()ëŠ” ì§€ë„¤ë¦­ ë©”ì„œë“œë¼ì„œ ì•ì— <T>ë¥¼ ë¶™ì˜€ë‹¤. ì¶”ì • ê°€ëŠ¥í•˜ë¯€ë¡œ ìƒëµ ê°€ëŠ¥.

```java
Optional<String> optVal = null;                     // nullë¡œ ì´ˆê¸°í™”
Optional<String> optVal = Optional.<String>empty(); // ë¹ˆ ê°ì²´ë¡œ ì´ˆê¸°í™”
```